class t{implementsSignals=void 0;projectStandardVersion=void 0;pendingDownload=void 0;constructor(t,n={}){this.callbacks=n,this.iframe=t,window.addEventListener("message",(t=>{const n=t.data;if(n&&this.iframe.contentWindow===t.source&&("gps:b:init"===n.type&&n.implementsSignals&&(this.projectStandardVersion=n.v,this.implementsSignals=n.implementsSignals,"function"==typeof this.callbacks.onInit&&(this.callbacks.onInit(this.projectStandardVersion,this.implementsSignals),this.callbacks.onInit=void 0)),"gps:b:load-compl"===n.type&&"function"==typeof this.callbacks.onLoadingComplete&&this.callbacks.onLoadingComplete(),"gps:b:capt-prev"===n.type&&"function"==typeof this.callbacks.onCapturePreview&&this.callbacks.onCapturePreview(),"gps:b:download"===n.type)){if(!this.pendingDownload)return;!function(t,n){const e=document.createElement("a");e.download=n,e.href=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}(n.dataUrl,`${this.pendingDownload.key}.${n.ext}`),this.pendingDownload=void 0}}));const e=()=>{this.iframe.contentWindow.postMessage({type:"gps:f:init",v:"1.0.1"},"*")};this.iframe.addEventListener("load",e),e()}get downloadSignals(){return this.implementsSignals?.filter((t=>"gps:f:download"===t.type))}triggerDownload(t){this.pendingDownload={key:t},this.iframe.contentWindow.postMessage({type:"gps:f:download",key:t},"*")}}export{t as GenArtPlatform};
