const GENERATIVE_PLATFORM_STANDARD_VERSION="1";function downloadFile(e,n){var t=document.createElement("a");t.download=n,t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}class GenArtPlatform{implementsSignals=void 0;projectStandardVersion=void 0;pendingDownload=void 0;constructor(e,n={}){this.callbacks=n,this.iframe=e,window.addEventListener("message",e=>{var n=e.data;n&&this.iframe.contentWindow===e.source&&("gps:b:init"===n.type&&n.implementsSignals&&(this.projectStandardVersion=n.v,this.implementsSignals=n.implementsSignals,"function"==typeof this.callbacks.onInit)&&this.callbacks.onInit(this.projectStandardVersion,this.implementsSignals),"gps:b:load-compl"===n.type&&"function"==typeof this.callbacks.onLoadingComplete&&this.callbacks.onLoadingComplete(),"gps:b:capt-prev"===n.type&&"function"==typeof this.callbacks.onCapturePreview&&this.callbacks.onCapturePreview(),"gps:b:download"===n.type)&&this.pendingDownload&&(downloadFile(n.dataUrl,this.pendingDownload.key+"."+n.ext),this.pendingDownload=void 0)}),this.iframe.addEventListener("load",()=>{this.iframe.contentWindow.postMessage({type:"gps:f:init",v:GENERATIVE_PLATFORM_STANDARD_VERSION},"*")})}get downloadSignals(){return this.implementsSignals?.filter(e=>"gps:f:download"===e.type)}triggerDownload(e){this.pendingDownload={key:e},this.iframe.contentWindow.postMessage({type:"gps:f:download",key:e},"*")}}"undefined"!=typeof window&&(window.GenArtPlatform=GenArtPlatform);